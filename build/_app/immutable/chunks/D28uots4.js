import{s as $,r as X,v as Y,w as Z,x as F,j as Q,l as fe,i as E,d as m,W as ue,X as q,Y as Ue,y as x,e as j,c as O,a as B,a4 as P,_ as ne,u as S,H as le,O as _e,F as Qe,q as xe,D as oe,E as re,f as v,g as I,n as de,A as $e,p as et,t as U,k as R,b as W,o as J,S as tt,h as z}from"./vexCXLX9.js";import{S as ee,i as te,t as M,a as A,g as me,c as ge,k as We,j as ze,h as we,b as be,d as ve,m as ke,e as ye,f as it}from"./Cdll-xsj.js";import{d as nt}from"./tMLpXUqA.js";import{s as lt,c as st,u as at,d as ot}from"./CgO5y2dz.js";import{g as se}from"./CgU5AtxT.js";import{c as qe,d as rt}from"./CyFe254w.js";import{a as ft,b as ut,u as Te,d as Se,e as dt,f as ce,s as ct,h as ht}from"./-eX2sS6k.js";import{v as Ie,m as _t,c as mt,d as ae}from"./DzLIgThl.js";import{T as gt}from"./BsHho0_v.js";import{t as he}from"./DMk2eJ1b.js";import{n as bt}from"./hvQ-lebT.js";import{M as vt}from"./Dq9WPRw5.js";const kt=t=>({subIds:t&1}),Be=t=>({subIds:t[0]});function yt(t){let e;const i=t[6].default,n=X(i,t,t[5],Be);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,f){n&&n.m(l,f),e=!0},p(l,[f]){n&&n.p&&(!e||f&33)&&Y(n,i,l,l[5],e?F(i,l[5],f,kt):Z(l[5]),Be)},i(l){e||(M(n,l),e=!0)},o(l){A(n,l),e=!1},d(l){n&&n.d(l)}}}function pt(t,e,i){let n,{$$slots:l={},$$scope:f}=e,{disabled:s=void 0}=e,{open:o=void 0}=e,{onOpenChange:a=void 0}=e;const{updateOption:u,ids:r,states:{subOpen:d}}=lt({disabled:s,onOpenChange:({next:_})=>(o!==_&&(a==null||a(_),i(2,o=_)),_)}),b=nt([r.menu,r.trigger],([_,y])=>({menu:_,trigger:y}));return Q(t,b,_=>i(0,n=_)),t.$$set=_=>{"disabled"in _&&i(3,s=_.disabled),"open"in _&&i(2,o=_.open),"onOpenChange"in _&&i(4,a=_.onOpenChange),"$$scope"in _&&i(5,f=_.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&o!==void 0&&d.set(o),t.$$.dirty&8&&u("disabled",s)},[n,b,o,s,a,f,l]}class _i extends ee{constructor(e){super(),te(this,e,pt,yt,$,{disabled:3,open:2,onOpenChange:4})}}const Ct=t=>({builder:t[0]&256}),Ee=t=>({builder:t[8]}),wt=t=>({builder:t[0]&256}),je=t=>({builder:t[8]}),Tt=t=>({builder:t[0]&256}),Oe=t=>({builder:t[8]}),St=t=>({builder:t[0]&256}),Me=t=>({builder:t[8]}),It=t=>({builder:t[0]&256}),Ae=t=>({builder:t[8]}),Bt=t=>({builder:t[0]&256}),Le=t=>({builder:t[8]});function Et(t){let e,i,n,l;const f=t[28].default,s=X(f,t,t[27],Ee);let o=[t[8],t[13]],a={};for(let u=0;u<o.length;u+=1)a=q(a,o[u]);return{c(){e=j("div"),s&&s.c(),this.h()},l(u){e=O(u,"DIV",{});var r=B(e);s&&s.l(r),r.forEach(m),this.h()},h(){P(e,a)},m(u,r){E(u,e,r),s&&s.m(e,null),t[33](e),i=!0,n||(l=[ne(t[8].action(e)),S(e,"m-focusout",t[12]),S(e,"m-keydown",t[12]),S(e,"m-pointermove",t[12])],n=!0)},p(u,r){s&&s.p&&(!i||r[0]&134217984)&&Y(s,f,u,u[27],i?F(f,u[27],r,Ct):Z(u[27]),Ee),P(e,a=se(o,[r[0]&256&&u[8],r[0]&8192&&u[13]]))},i(u){i||(M(s,u),i=!0)},o(u){A(s,u),i=!1},d(u){u&&m(e),s&&s.d(u),t[33](null),n=!1,le(l)}}}function jt(t){let e,i,n,l,f;const s=t[28].default,o=X(s,t,t[27],je);let a=[t[8],t[13]],u={};for(let r=0;r<a.length;r+=1)u=q(u,a[r]);return{c(){e=j("div"),o&&o.c(),this.h()},l(r){e=O(r,"DIV",{});var d=B(e);o&&o.l(d),d.forEach(m),this.h()},h(){P(e,u)},m(r,d){E(r,e,d),o&&o.m(e,null),t[32](e),n=!0,l||(f=[ne(t[8].action(e)),S(e,"m-focusout",t[12]),S(e,"m-keydown",t[12]),S(e,"m-pointermove",t[12])],l=!0)},p(r,d){t=r,o&&o.p&&(!n||d[0]&134217984)&&Y(o,s,t,t[27],n?F(s,t[27],d,wt):Z(t[27]),je),P(e,u=se(a,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){n||(M(o,r),i&&i.end(1),n=!0)},o(r){A(o,r),r&&(i=We(e,t[5],t[6])),n=!1},d(r){r&&m(e),o&&o.d(r),t[32](null),r&&i&&i.end(),l=!1,le(f)}}}function Ot(t){let e,i,n,l,f;const s=t[28].default,o=X(s,t,t[27],Oe);let a=[t[8],t[13]],u={};for(let r=0;r<a.length;r+=1)u=q(u,a[r]);return{c(){e=j("div"),o&&o.c(),this.h()},l(r){e=O(r,"DIV",{});var d=B(e);o&&o.l(d),d.forEach(m),this.h()},h(){P(e,u)},m(r,d){E(r,e,d),o&&o.m(e,null),t[31](e),n=!0,l||(f=[ne(t[8].action(e)),S(e,"m-focusout",t[12]),S(e,"m-keydown",t[12]),S(e,"m-pointermove",t[12])],l=!0)},p(r,d){t=r,o&&o.p&&(!n||d[0]&134217984)&&Y(o,s,t,t[27],n?F(s,t[27],d,Tt):Z(t[27]),Oe),P(e,u=se(a,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){n||(M(o,r),r&&(i||_e(()=>{i=ze(e,t[3],t[4]),i.start()})),n=!0)},o(r){A(o,r),n=!1},d(r){r&&m(e),o&&o.d(r),t[31](null),l=!1,le(f)}}}function Mt(t){let e,i,n,l,f,s;const o=t[28].default,a=X(o,t,t[27],Me);let u=[t[8],t[13]],r={};for(let d=0;d<u.length;d+=1)r=q(r,u[d]);return{c(){e=j("div"),a&&a.c(),this.h()},l(d){e=O(d,"DIV",{});var b=B(e);a&&a.l(b),b.forEach(m),this.h()},h(){P(e,r)},m(d,b){E(d,e,b),a&&a.m(e,null),t[30](e),l=!0,f||(s=[ne(t[8].action(e)),S(e,"m-focusout",t[12]),S(e,"m-keydown",t[12]),S(e,"m-pointermove",t[12])],f=!0)},p(d,b){t=d,a&&a.p&&(!l||b[0]&134217984)&&Y(a,o,t,t[27],l?F(o,t[27],b,St):Z(t[27]),Me),P(e,r=se(u,[b[0]&256&&t[8],b[0]&8192&&t[13]]))},i(d){l||(M(a,d),d&&_e(()=>{l&&(n&&n.end(1),i=ze(e,t[3],t[4]),i.start())}),l=!0)},o(d){A(a,d),i&&i.invalidate(),d&&(n=We(e,t[5],t[6])),l=!1},d(d){d&&m(e),a&&a.d(d),t[30](null),d&&n&&n.end(),f=!1,le(s)}}}function At(t){let e,i,n,l,f;const s=t[28].default,o=X(s,t,t[27],Ae);let a=[t[8],t[13]],u={};for(let r=0;r<a.length;r+=1)u=q(u,a[r]);return{c(){e=j("div"),o&&o.c(),this.h()},l(r){e=O(r,"DIV",{});var d=B(e);o&&o.l(d),d.forEach(m),this.h()},h(){P(e,u)},m(r,d){E(r,e,d),o&&o.m(e,null),t[29](e),n=!0,l||(f=[ne(t[8].action(e)),S(e,"m-focusout",t[12]),S(e,"m-keydown",t[12]),S(e,"m-pointermove",t[12])],l=!0)},p(r,d){t=r,o&&o.p&&(!n||d[0]&134217984)&&Y(o,s,t,t[27],n?F(s,t[27],d,It):Z(t[27]),Ae),P(e,u=se(a,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){n||(M(o,r),r&&_e(()=>{n&&(i||(i=we(e,t[1],t[2],!0)),i.run(1))}),n=!0)},o(r){A(o,r),r&&(i||(i=we(e,t[1],t[2],!1)),i.run(0)),n=!1},d(r){r&&m(e),o&&o.d(r),t[29](null),r&&i&&i.end(),l=!1,le(f)}}}function Lt(t){let e;const i=t[28].default,n=X(i,t,t[27],Le);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,f){n&&n.m(l,f),e=!0},p(l,f){n&&n.p&&(!e||f[0]&134217984)&&Y(n,i,l,l[27],e?F(i,l[27],f,Bt):Z(l[27]),Le)},i(l){e||(M(n,l),e=!0)},o(l){A(n,l),e=!1},d(l){n&&n.d(l)}}}function Vt(t){let e,i,n,l;const f=[Lt,At,Mt,Ot,jt,Et],s=[];function o(a,u){return a[7]&&a[9]?0:a[1]&&a[9]?1:a[3]&&a[5]&&a[9]?2:a[3]&&a[9]?3:a[5]&&a[9]?4:a[9]?5:-1}return~(e=o(t))&&(i=s[e]=f[e](t)),{c(){i&&i.c(),n=fe()},l(a){i&&i.l(a),n=fe()},m(a,u){~e&&s[e].m(a,u),E(a,n,u),l=!0},p(a,u){let r=e;e=o(a),e===r?~e&&s[e].p(a,u):(i&&(me(),A(s[r],1,1,()=>{s[r]=null}),ge()),~e?(i=s[e],i?i.p(a,u):(i=s[e]=f[e](a),i.c()),M(i,1),i.m(n.parentNode,n)):i=null)},i(a){l||(M(i),l=!0)},o(a){A(i),l=!1},d(a){a&&m(n),~e&&s[e].d(a)}}}function Dt(t,e,i){let n;const l=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let f=ue(e,l),s,o,{$$slots:a={},$$scope:u}=e,{transition:r=void 0}=e,{transitionConfig:d=void 0}=e,{inTransition:b=void 0}=e,{inTransitionConfig:_=void 0}=e,{outTransition:y=void 0}=e,{outTransitionConfig:C=void 0}=e,{asChild:w=!1}=e,{id:p=void 0}=e,{side:V="right"}=e,{align:g="start"}=e,{sideOffset:T=0}=e,{alignOffset:L=0}=e,{collisionPadding:c=8}=e,{avoidCollisions:k=!0}=e,{collisionBoundary:D=void 0}=e,{sameWidth:H=!1}=e,{fitViewport:ie=!1}=e,{strategy:G="absolute"}=e,{overlap:K=!1}=e,{el:N=void 0}=e;const{elements:{subMenu:pe},states:{subOpen:Ce},ids:He,getAttrs:Re}=st();Q(t,pe,h=>i(26,s=h)),Q(t,Ce,h=>i(9,o=h));const Je=qe(),Xe=Re("sub-content");function Ye(h){x[h?"unshift":"push"](()=>{N=h,i(0,N)})}function Ze(h){x[h?"unshift":"push"](()=>{N=h,i(0,N)})}function Fe(h){x[h?"unshift":"push"](()=>{N=h,i(0,N)})}function Ge(h){x[h?"unshift":"push"](()=>{N=h,i(0,N)})}function Ke(h){x[h?"unshift":"push"](()=>{N=h,i(0,N)})}return t.$$set=h=>{e=q(q({},e),Ue(h)),i(13,f=ue(e,l)),"transition"in h&&i(1,r=h.transition),"transitionConfig"in h&&i(2,d=h.transitionConfig),"inTransition"in h&&i(3,b=h.inTransition),"inTransitionConfig"in h&&i(4,_=h.inTransitionConfig),"outTransition"in h&&i(5,y=h.outTransition),"outTransitionConfig"in h&&i(6,C=h.outTransitionConfig),"asChild"in h&&i(7,w=h.asChild),"id"in h&&i(14,p=h.id),"side"in h&&i(15,V=h.side),"align"in h&&i(16,g=h.align),"sideOffset"in h&&i(17,T=h.sideOffset),"alignOffset"in h&&i(18,L=h.alignOffset),"collisionPadding"in h&&i(19,c=h.collisionPadding),"avoidCollisions"in h&&i(20,k=h.avoidCollisions),"collisionBoundary"in h&&i(21,D=h.collisionBoundary),"sameWidth"in h&&i(22,H=h.sameWidth),"fitViewport"in h&&i(23,ie=h.fitViewport),"strategy"in h&&i(24,G=h.strategy),"overlap"in h&&i(25,K=h.overlap),"el"in h&&i(0,N=h.el),"$$scope"in h&&i(27,u=h.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16384&&p&&He.menu.set(p),t.$$.dirty[0]&67108864&&i(8,n=s),t.$$.dirty[0]&256&&Object.assign(n,Xe),t.$$.dirty[0]&67076096&&at({side:V,align:g,sideOffset:T,alignOffset:L,collisionPadding:c,avoidCollisions:k,collisionBoundary:D,sameWidth:H,fitViewport:ie,strategy:G,overlap:K})},[N,r,d,b,_,y,C,w,n,o,pe,Ce,Je,f,p,V,g,T,L,c,k,D,H,ie,G,K,s,u,a,Ye,Ze,Fe,Ge,Ke]}class mi extends ee{constructor(e){super(),te(this,e,Dt,Vt,$,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const Nt=t=>({builder:t&4}),Ve=t=>({builder:t[2]}),Pt=t=>({builder:t&4}),De=t=>({builder:t[2]});function Ut(t){let e,i,n,l;const f=t[13].default,s=X(f,t,t[12],Ve);let o=[t[2],t[6]],a={};for(let u=0;u<o.length;u+=1)a=q(a,o[u]);return{c(){e=j("div"),s&&s.c(),this.h()},l(u){e=O(u,"DIV",{});var r=B(e);s&&s.l(r),r.forEach(m),this.h()},h(){P(e,a)},m(u,r){E(u,e,r),s&&s.m(e,null),t[14](e),i=!0,n||(l=[ne(t[2].action(e)),S(e,"m-click",t[5]),S(e,"m-focusin",t[5]),S(e,"m-focusout",t[5]),S(e,"m-keydown",t[5]),S(e,"m-pointerleave",t[5]),S(e,"m-pointermove",t[5])],n=!0)},p(u,r){s&&s.p&&(!i||r&4100)&&Y(s,f,u,u[12],i?F(f,u[12],r,Nt):Z(u[12]),Ve),P(e,a=se(o,[r&4&&u[2],r&64&&u[6]]))},i(u){i||(M(s,u),i=!0)},o(u){A(s,u),i=!1},d(u){u&&m(e),s&&s.d(u),t[14](null),n=!1,le(l)}}}function Wt(t){let e;const i=t[13].default,n=X(i,t,t[12],De);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,f){n&&n.m(l,f),e=!0},p(l,f){n&&n.p&&(!e||f&4100)&&Y(n,i,l,l[12],e?F(i,l[12],f,Pt):Z(l[12]),De)},i(l){e||(M(n,l),e=!0)},o(l){A(n,l),e=!1},d(l){n&&n.d(l)}}}function zt(t){let e,i,n,l;const f=[Wt,Ut],s=[];function o(a,u){return a[1]?0:1}return e=o(t),i=s[e]=f[e](t),{c(){i.c(),n=fe()},l(a){i.l(a),n=fe()},m(a,u){s[e].m(a,u),E(a,n,u),l=!0},p(a,[u]){let r=e;e=o(a),e===r?s[e].p(a,u):(me(),A(s[r],1,1,()=>{s[r]=null}),ge(),i=s[e],i?i.p(a,u):(i=s[e]=f[e](a),i.c()),M(i,1),i.m(n.parentNode,n))},i(a){l||(M(i),l=!0)},o(a){A(i),l=!1},d(a){a&&m(n),s[e].d(a)}}}function qt(t,e,i){let n,l;const f=["disabled","asChild","id","el"];let s=ue(e,f),o,a,{$$slots:u={},$$scope:r}=e,{disabled:d=!1}=e,{asChild:b=!1}=e,{id:_=void 0}=e,{el:y=void 0}=e;const{elements:{subTrigger:C},ids:w,getAttrs:p,options:V}=ot();Q(t,C,c=>i(11,a=c));const{disabled:g}=V;Q(t,g,c=>i(10,o=c));const T=qe();function L(c){x[c?"unshift":"push"](()=>{y=c,i(0,y)})}return t.$$set=c=>{e=q(q({},e),Ue(c)),i(6,s=ue(e,f)),"disabled"in c&&i(7,d=c.disabled),"asChild"in c&&i(1,b=c.asChild),"id"in c&&i(8,_=c.id),"el"in c&&i(0,y=c.el),"$$scope"in c&&i(12,r=c.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&_&&w.trigger.set(_),t.$$.dirty&2048&&i(2,n=a),t.$$.dirty&1152&&i(9,l={...p("sub-trigger"),...rt(d||o)}),t.$$.dirty&516&&Object.assign(n,l)},[y,b,n,C,g,T,s,d,_,l,o,a,r,u,L]}class gi extends ee{constructor(e){super(),te(this,e,qt,zt,$,{disabled:7,asChild:1,id:8,el:0})}}function Ht(t){let e,i;return e=new gt({props:{tags:t[0]}}),e.$on("delete",t[4]),e.$on("add",t[5]),{c(){be(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,[l]){const f={};l&1&&(f.tags=n[0]),e.$set(f)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){A(e.$$.fragment,n),i=!1},d(n){ye(e,n)}}}function Rt(t,e,i){const n=Qe();let{chatId:l=""}=e,f=[];const s=async()=>await ft(localStorage.token,l).catch(async d=>[]),o=async d=>{await ut(localStorage.token,l,d).catch(async _=>(he.error(`${_}`),null))&&(i(0,f=await s()),await Te(localStorage.token,l,{tags:f}),await Ie.set(await Se(localStorage.token)),n("add",{name:d}))},a=async d=>{await dt(localStorage.token,l,d),i(0,f=await s()),await Te(localStorage.token,l,{tags:f}),await Ie.set(await Se(localStorage.token)),n("delete",{name:d})};xe(async()=>{l&&i(0,f=await s())});const u=d=>{a(d.detail)},r=d=>{o(d.detail)};return t.$$set=d=>{"chatId"in d&&i(3,l=d.chatId)},[f,o,a,l,u,r]}class bi extends ee{constructor(e){super(),te(this,e,Rt,Ht,$,{chatId:3})}}function Jt(t){let e,i,n;return{c(){e=oe("svg"),i=oe("path"),n=oe("path"),this.h()},l(l){e=re(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var f=B(e);i=re(f,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),B(i).forEach(m),n=re(f,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),B(n).forEach(m),f.forEach(m),this.h()},h(){v(i,"fill-rule","evenodd"),v(i,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),v(i,"clip-rule","evenodd"),v(n,"fill-rule","evenodd"),v(n,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),v(n,"clip-rule","evenodd"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"viewBox","0 0 16 16"),v(e,"fill","currentColor"),v(e,"class",t[0])},m(l,f){E(l,e,f),I(e,i),I(e,n)},p(l,[f]){f&1&&v(e,"class",l[0])},i:de,o:de,d(l){l&&m(e)}}}function Xt(t,e,i){let{className:n="w-4 h-4"}=e;return t.$$set=l=>{"className"in l&&i(0,n=l.className)},[n]}class Yt extends ee{constructor(e){super(),te(this,e,Xt,Jt,$,{className:0})}}function Ne(t){var L;let e,i,n,l,f,s,o,a,u,r,d,b,_;function y(c,k){return c[2].share_id?Ft:Zt}let C=y(t),w=C(t),p=((L=t[4])==null?void 0:L.features.enable_community_sharing)&&Pe(t);u=new Yt({});function V(c,k){return c[2].share_id?Kt:Gt}let g=V(t),T=g(t);return{c(){e=j("div"),i=j("div"),w.c(),n=R(),l=j("div"),f=j("div"),s=j("div"),p&&p.c(),o=R(),a=j("button"),be(u.$$.fragment),r=R(),T.c(),this.h()},l(c){e=O(c,"DIV",{class:!0});var k=B(e);i=O(k,"DIV",{class:!0});var D=B(i);w.l(D),D.forEach(m),n=J(k),l=O(k,"DIV",{class:!0});var H=B(l);f=O(H,"DIV",{class:!0});var ie=B(f);s=O(ie,"DIV",{class:!0});var G=B(s);p&&p.l(G),o=J(G),a=O(G,"BUTTON",{class:!0,type:!0,id:!0});var K=B(a);ve(u.$$.fragment,K),r=J(K),T.l(K),K.forEach(m),G.forEach(m),ie.forEach(m),H.forEach(m),k.forEach(m),this.h()},h(){v(i,"class","text-sm dark:text-gray-300 mb-1"),v(a,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),v(a,"type","button"),v(a,"id","copy-and-share-chat-button"),v(s,"class","flex gap-1"),v(f,"class","flex flex-col items-end space-x-1 mt-3"),v(l,"class","flex justify-end"),v(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(c,k){E(c,e,k),I(e,i),w.m(i,null),I(e,n),I(e,l),I(l,f),I(f,s),p&&p.m(s,null),I(s,o),I(s,a),ke(u,a,null),I(a,r),T.m(a,null),d=!0,b||(_=S(a,"click",t[11]),b=!0)},p(c,k){var D;C===(C=y(c))&&w?w.p(c,k):(w.d(1),w=C(c),w&&(w.c(),w.m(i,null))),(D=c[4])!=null&&D.features.enable_community_sharing?p?p.p(c,k):(p=Pe(c),p.c(),p.m(s,o)):p&&(p.d(1),p=null),g===(g=V(c))&&T?T.p(c,k):(T.d(1),T=g(c),T&&(T.c(),T.m(a,null)))},i(c){d||(M(u.$$.fragment,c),d=!0)},o(c){A(u.$$.fragment,c),d=!1},d(c){c&&m(e),w.d(),p&&p.d(),ye(u),T.d(),b=!1,_()}}}function Zt(t){let e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",i;return{c(){i=U(e)},l(n){i=W(n,e)},m(n,l){E(n,i,l)},p(n,l){l&8&&e!==(e=n[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&z(i,e)},d(n){n&&m(i)}}}function Ft(t){let e,i=t[3].t("You have shared this chat")+"",n,l,f,s=t[3].t("before")+"",o,a,u,r,d=t[3].t("Click here to")+"",b,_,y,C=t[3].t("delete this link")+"",w,p,V=t[3].t("and create a new shared link.")+"",g,T,L;return{c(){e=j("a"),n=U(i),l=R(),f=j("span"),o=U(s),a=U("."),r=R(),b=U(d),_=R(),y=j("button"),w=U(C),p=R(),g=U(V),this.h()},l(c){e=O(c,"A",{href:!0,target:!0});var k=B(e);n=W(k,i),l=J(k),f=O(k,"SPAN",{class:!0});var D=B(f);o=W(D,s),D.forEach(m),a=W(k,"."),k.forEach(m),r=J(c),b=W(c,d),_=J(c),y=O(c,"BUTTON",{class:!0});var H=B(y);w=W(H,C),H.forEach(m),p=J(c),g=W(c,V),this.h()},h(){v(f,"class","underline"),v(e,"href",u="/s/"+t[2].share_id),v(e,"target","_blank"),v(y,"class","underline")},m(c,k){E(c,e,k),I(e,n),I(e,l),I(e,f),I(f,o),I(e,a),E(c,r,k),E(c,b,k),E(c,_,k),E(c,y,k),I(y,w),E(c,p,k),E(c,g,k),T||(L=S(y,"click",t[9]),T=!0)},p(c,k){k&8&&i!==(i=c[3].t("You have shared this chat")+"")&&z(n,i),k&8&&s!==(s=c[3].t("before")+"")&&z(o,s),k&4&&u!==(u="/s/"+c[2].share_id)&&v(e,"href",u),k&8&&d!==(d=c[3].t("Click here to")+"")&&z(b,d),k&8&&C!==(C=c[3].t("delete this link")+"")&&z(w,C),k&8&&V!==(V=c[3].t("and create a new shared link.")+"")&&z(g,V)},d(c){c&&(m(e),m(r),m(b),m(_),m(y),m(p),m(g)),T=!1,L()}}}function Pe(t){let e,i=t[3].t("Share to BiXAI Community")+"",n,l,f;return{c(){e=j("button"),n=U(i),this.h()},l(s){e=O(s,"BUTTON",{class:!0,type:!0});var o=B(e);n=W(o,i),o.forEach(m),this.h()},h(){v(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),v(e,"type","button")},m(s,o){E(s,e,o),I(e,n),l||(f=S(e,"click",t[10]),l=!0)},p(s,o){o&8&&i!==(i=s[3].t("Share to BiXAI Community")+"")&&z(n,i)},d(s){s&&m(e),l=!1,f()}}}function Gt(t){let e=t[3].t("Copy Link")+"",i;return{c(){i=U(e)},l(n){i=W(n,e)},m(n,l){E(n,i,l)},p(n,l){l&8&&e!==(e=n[3].t("Copy Link")+"")&&z(i,e)},d(n){n&&m(i)}}}function Kt(t){let e=t[3].t("Update and Copy Link")+"",i;return{c(){i=U(e)},l(n){i=W(n,e)},m(n,l){E(n,i,l)},p(n,l){l&8&&e!==(e=n[3].t("Update and Copy Link")+"")&&z(i,e)},d(n){n&&m(i)}}}function Qt(t){let e,i,n,l=t[3].t("Share Chat")+"",f,s,o,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',u,r,d,b,_=t[2]&&Ne(t);return{c(){e=j("div"),i=j("div"),n=j("div"),f=U(l),s=R(),o=j("button"),o.innerHTML=a,u=R(),_&&_.c(),this.h()},l(y){e=O(y,"DIV",{});var C=B(e);i=O(C,"DIV",{class:!0});var w=B(i);n=O(w,"DIV",{class:!0});var p=B(n);f=W(p,l),p.forEach(m),s=J(w),o=O(w,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(o)!=="svelte-745w2y"&&(o.innerHTML=a),w.forEach(m),u=J(C),_&&_.l(C),C.forEach(m),this.h()},h(){v(n,"class","text-lg font-medium self-center"),v(o,"class","self-center"),v(i,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(y,C){E(y,e,C),I(e,i),I(i,n),I(n,f),I(i,s),I(i,o),I(e,u),_&&_.m(e,null),r=!0,d||(b=S(o,"click",t[8]),d=!0)},p(y,C){(!r||C&8)&&l!==(l=y[3].t("Share Chat")+"")&&z(f,l),y[2]?_?(_.p(y,C),C&4&&M(_,1)):(_=Ne(y),_.c(),M(_,1),_.m(e,null)):_&&(me(),A(_,1,1,()=>{_=null}),ge())},i(y){r||(M(_),r=!0)},o(y){A(_),r=!1},d(y){y&&m(e),_&&_.d(),d=!1,b()}}}function xt(t){let e,i,n;function l(s){t[12](s)}let f={size:"md",$$slots:{default:[Qt]},$$scope:{ctx:t}};return t[0]!==void 0&&(f.show=t[0]),e=new vt({props:f}),x.push(()=>it(e,"show",l)),{c(){be(e.$$.fragment)},l(s){ve(e.$$.fragment,s)},m(s,o){ke(e,s,o),n=!0},p(s,[o]){const a={};o&65567&&(a.$$scope={dirty:o,ctx:s}),!i&&o&1&&(i=!0,a.show=s[0],$e(()=>i=!1)),e.$set(a)},i(s){n||(M(e.$$.fragment,s),n=!0)},o(s){A(e.$$.fragment,s),n=!1},d(s){ye(e,s)}}}function $t(t,e,i){let n,l,f;Q(t,_t,g=>i(14,n=g)),Q(t,mt,g=>i(4,f=g));let{chatId:s}=e,o=null,a=null;const u=et("i18n");Q(t,u,g=>i(3,l=g));const r=async()=>{const g=await ct(localStorage.token,s);return a=`${window.location.origin}/s/${g.id}`,console.log(a),i(2,o=await ce(localStorage.token,s)),a},d=async()=>{const g=o.chat;console.log("share",g),he.success(l.t("Redirecting you to BiXAI Community"));const T="https://openwebui.com",L=await window.open(`${T}/chats/upload`,"_blank");window.addEventListener("message",c=>{c.origin===T&&c.data==="loaded"&&L.postMessage(JSON.stringify({chat:g,models:n.filter(k=>g.models.includes(k.id))}),"*")},!1)};let{show:b=!1}=e;const _=g=>o?g?o.id!==g.id||o.share_id!==g.share_id:!1:!0,y=()=>{i(0,b=!1)},C=async()=>{await ht(localStorage.token,s)&&i(2,o=await ce(localStorage.token,s))},w=()=>{d(),i(0,b=!1)},p=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const T=async()=>{const L=await r();return new Blob([L],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":T()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(L=>(console.error("Async: Could not copy text: ",L),!1))}else bt(await r());he.success(l.t("Copied shared chat URL to clipboard!")),i(0,b=!1)};function V(g){b=g,i(0,b)}return t.$$set=g=>{"chatId"in g&&i(1,s=g.chatId),"show"in g&&i(0,b=g.show)},t.$$.update=()=>{t.$$.dirty&7&&b&&(async()=>{if(s){const g=await ce(localStorage.token,s);_(g)&&i(2,o=g)}else i(2,o=null),console.log(o)})()},[b,s,o,l,f,u,r,d,y,C,w,p,V]}class vi extends ee{constructor(e){super(),te(this,e,$t,xt,$,{chatId:1,show:0})}}function ei(t){let e,i;return{c(){e=oe("svg"),i=oe("path"),this.h()},l(n){e=re(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var l=B(e);i=re(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),B(i).forEach(m),l.forEach(m),this.h()},h(){v(i,"stroke-linecap","round"),v(i,"stroke-linejoin","round"),v(i,"d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke-width",t[1]),v(e,"stroke","currentColor"),v(e,"class",t[0])},m(n,l){E(n,e,l),I(e,i)},p(n,[l]){l&2&&v(e,"stroke-width",n[1]),l&1&&v(e,"class",n[0])},i:de,o:de,d(n){n&&m(e)}}}function ti(t,e,i){let{className:n="size-4"}=e,{strokeWidth:l="1.5"}=e;return t.$$set=f=>{"className"in f&&i(0,n=f.className),"strokeWidth"in f&&i(1,l=f.strokeWidth)},[n,l]}class ki extends ee{constructor(e){super(),te(this,e,ti,ei,$,{className:0,strokeWidth:1})}}const yi=async t=>{let e=null;const i=await fetch(`${ae}/memories/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(e=n.detail,null));if(e)throw e;return i},pi=async(t,e)=>{let i=null;const n=await fetch(`${ae}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`},body:JSON.stringify({content:e})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(i=l.detail,null));if(i)throw i;return n},Ci=async(t,e,i)=>{let n=null;const l=await fetch(`${ae}/memories/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`},body:JSON.stringify({content:i})}).then(async f=>{if(!f.ok)throw await f.json();return f.json()}).catch(f=>(n=f.detail,null));if(n)throw n;return l},wi=async(t,e)=>{let i=null;const n=await fetch(`${ae}/memories/query`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`},body:JSON.stringify({content:e})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(i=l.detail,null));if(i)throw i;return n},Ti=async(t,e)=>{let i=null;const n=await fetch(`${ae}/memories/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`}}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).then(l=>l).catch(l=>(i=l.detail,null));if(i)throw i;return n},Si=async t=>{let e=null;const i=await fetch(`${ae}/memories/delete/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(e=n.detail,null));if(e)throw e;return i};export{_i as M,ki as P,vi as S,bi as T,gi as a,mi as b,pi as c,Si as d,Ti as e,yi as g,wi as q,Ci as u};
//# sourceMappingURL=D28uots4.js.map
